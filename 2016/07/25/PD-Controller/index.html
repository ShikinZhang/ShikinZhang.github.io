<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="不务正业的折腾者"><title>PD Controller Implement in Simulink | SK_Home</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">PD Controller Implement in Simulink</h1><a id="logo" href="/.">SK_Home</a><p class="description">The only thing standing between you and your goal is the story you keep telling yourself as to why you can't achieve it.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">PD Controller Implement in Simulink</h1><div class="post-meta">Jul 25, 2016<span> | </span><span class="category"><a href="/categories/PID-learning/">PID learning</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>PD Controller Implement in Simulink. It is very simple model so that if I forget how to build a PID controller system, I can use this model to build a simple PID controller system.</p>
<h2 id="PID-Pseudo-Code"><a href="#PID-Pseudo-Code" class="headerlink" title="PID Pseudo Code"></a>PID Pseudo Code</h2><p><img src="http://a1.qpic.cn/psb?/V118uAby40NSw2/KfjbgZaELXkM*sTvMAFItL0WEM0m74sSw6QtqRSUCE4!/b/dAsBAAAAAAAA&amp;bo=ZgOIAQAAAAAFB8g!&amp;rf=viewer_4" alt=""></p>
<p>The parameters Kp, Ki and Kd can be calculated by Simulink.</p>
<p>In this guide, We implement a PD Controller, so we only need concentrate on Kp and Kd</p>
<h2 id="PD-model-in-Simulink"><a href="#PD-model-in-Simulink" class="headerlink" title="PD model in Simulink"></a>PD model in Simulink</h2><p><img src="http://a3.qpic.cn/psb?/V118uAby40NSw2/pvyZ.JuwtQ*dr*VKpW7cHALHFTdjxtuDDJsK4aRqB4g!/b/dA0BAAAAAAAA&amp;bo=9gOAAgAAAAAFAFQ!&amp;rf=viewer_4" alt=""><br>Here is the model in Simulink. you can find every block in Simulink and add it to model. The block Zere-Order Hold and Intergrator are only used to get the measured position, so in Robot model, these two blocks are not really exist.</p>
<p>Then we must unify the sample time. (The block Delay, PD controller and Zero-Order Hold)</p>
<p>The feedback signal is position. As for Velocity feedback, it is the derivative of position and generated in PD controller block.</p>
<hr>
<p><img src="http://a2.qpic.cn/psb?/V118uAby40NSw2/JDEyHeNGpLvMRtyeLjY2qFm93*0HdbFe5CHrfvrKXmc!/b/dAwBAAAAAAAA&amp;bo=6AKAAgAAAAAFAEs!&amp;rf=viewer_4" alt=""></p>
<p>Here is the Signal Builder which generates the simulation signal for desired position.</p>
<hr>
<p><img src="http://a2.qpic.cn/psb?/V118uAby40NSw2/tYZ0ygVeOx9S.aRTDenO*Yp4yTP6lVGtmm8XntoUS5s!/b/dAwBAAAAAAAA&amp;bo=xgKAAgAAAAAFAGU!&amp;rf=viewer_4" alt=""></p>
<p>Here is the configuration of PD controller</p>
<p>‘Controller’ is selected as PD. ‘Sample time’ is set as 0.001. Then you need click ‘Apply’ button so that you can click ‘Tune…’ button for next interface.</p>
<hr>
<p><img src="http://a3.qpic.cn/psb?/V118uAby40NSw2/RQYcWaq*aZ1q54EABaYip9PDliuN65zqsS6x02CkrFw!/b/dA0BAAAAAAAA&amp;bo=YQOAAgAAAAAFAMM!&amp;rf=viewer_4" alt=""></p>
<p>Here is the PID Tuner.</p>
<p>In this interface, you can set proper ‘Respose Time’ and click ‘Update Block’ button if you are satisfied with the curve. By the way, you can click ‘Show Parameters’ button to see the parameters here and of course you can see the parameters in PD controller configuration.</p>
<p>##Simulation Result<br><img src="http://a3.qpic.cn/psb?/V118uAby40NSw2/Xkozqny8cPOxbwtnbdG7dNcw6oHxXPM8zMVs0MnNwhs!/b/dA0BAAAAAAAA&amp;bo=WwSAAgAAAAAFAP4!&amp;rf=viewer_4" alt=""></p>
<p>The 1st diagram is the Disired position</p>
<p>The 2nd diagram is the Measured position</p>
<p>The 3rd diagram is the Velocity</p>
<p>THe 4th diagram is the Velocity error</p>
<h2 id="Not-Tested-Code"><a href="#Not-Tested-Code" class="headerlink" title="Not Tested Code"></a>Not Tested Code</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">float</span> p_m,p_d;							<span class="comment">// input</span></div><div class="line"><span class="keyword">float</span> err,err_delay,kp,kd,v,v_delay;	<span class="comment">// process</span></div><div class="line"><span class="keyword">float</span> v_err								<span class="comment">// output</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_Handler</span><span class="params">()</span> 					<span class="comment">// timer handler function in MCU and it just ensures the Sample time is 1ms</span></span></div><div class="line">&#123;</div><div class="line">	p_m = get_position();							<span class="comment">// get the measured position</span></div><div class="line">	err_delay = err;								<span class="comment">// get error delay</span></div><div class="line">	err = p_d - p_m;								<span class="comment">// get error</span></div><div class="line">	v_delay = v;									<span class="comment">// get velocity delay</span></div><div class="line">	v = kp*err + kd * (err-err_delay)/<span class="number">0.001</span>;		<span class="comment">// calculate the velocity and 0.001 is the sample time</span></div><div class="line">	v_err = v - v_delay;							<span class="comment">// calculate the velocity error</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://shikin.ga/2016/07/25/PD-Controller/" data-id="cj93k1gd40003c8wb8lor155l" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/07/26/motor-model/" class="pre">电机模型在Simulink中的实现</a><a href="/2016/07/25/kalman-filter/" class="next">卡尔曼滤波器</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://shikin.ga"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MicroMouse/">MicroMouse</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PID-learning/">PID learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Signal/">Signal</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/recall/">recall</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/13/ATMEGA16-GAME-CONSOLE-PROJ/">ATMEGA16-GAME-CONSOLE-PROJ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/11/ATMEGA16-GAME-CONSOLE-PROJ/">ATMEGA16_GAME_CONSOLE PROJ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/09/issue/">Installing AVR STUDIO 4 issue</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/27/vocabulary/">vocabulary</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/02/filters/">Design of Discrete IIR Filter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/01/lowpass-filter-design/">lowpass_filter_design</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/01/analog-filter-design/">analog_filter_design</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/07/python-QRcode/">python+opencv 生成/解码 QRcode</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/24/python-opencv/">windos环境下搭建python+opencv</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/re-call/">re-call</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">SK_Home.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>